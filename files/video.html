<meta charset='UTF-8'/>
<meta content='width=device-width, initial-scale=1' name='viewport'/>
<form id="search-form" class="search-form relative" action="https://yt1s.com/en37" method="GET">
<input id="s_input" type="search" name="q" class="search__input" aria-label="Search" placeholder="Search or paste Youtube link here" value="">
<button id="btn-convert" class="btn-red" type="button">Convert</button>
</form>
<div id="search-result"></div>
<script type="text/javascript" charset="utf-8">
    var c_url_tmp = "https:\/\/yt1s.com\/en?q=";
    var k_url_next = "https:\/\/yt1s.com\/en37";
    var k_page = 'home';
    var k_is_mini = false;
</script>
<script type="text/javascript">
    var yt_tmp = "https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D";
    var k_url_check_task = "https:\/\/yt1s.com\/api\/ajaxConvert\/checkTask";
    var k_url_convert = "https:\/\/yt1s.com\/api\/ajaxConvert\/convert";
    var k_url_search = "https:\/\/yt1s.com\/api\/ajaxSearch\/index";
    var txt_processing = "Converting, please wait...";
    var txt_download = "Download";
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">
function renderSelectQuality(links) {
    var e_html = '<select class="form-control form-control-small" id="formatSelect">';

    var iqs = {
        'mp4':['auto','1080p','720p','480p','360p','240p','144p'],
        '3gp':['144p'],
        'mp3':['auto','320kbps','256kbps','192kbps','128kbps','96kbps','64kbps']
    };

    $.each(iqs, function (ltype, qs) {
        if(links[ltype] !== undefined){
            e_html += '<optgroup label="'+ltype+'">';
            $.each(qs, function (stt, fquality) {
                $.each(links[ltype], function (itag, finfo) {
                    if(fquality == finfo.q){
                        e_html += '<option value="'+finfo.k+'" '+((typeof finfo.selected!="undefined" && finfo.selected=="selected")?'selected':'')+'>' + ((typeof finfo.q_text !='undefined' && finfo.q_text)?finfo.q_text:finfo.q) + (finfo.size?' (' + finfo.size +')':'') +' </option>';
                    }
                });
            });
            e_html += '</optgroup>';
        }
    });

    e_html += '</select>';
    return e_html;
};
function fancyTimeFormat(duration) {
    var hrs = ~~(duration / 3600);
    var mins = ~~((duration % 3600) / 60);
    var secs = ~~duration % 60;
    var ret = "";
    if (hrs > 0) {
        ret += "" + hrs + ":" + (mins < 10 ? "0" : "");
    }
    ret += "" + mins + ":" + (secs < 10 ? "0" : "");
    ret += "" + secs;
    return ret;
};
function renderDetail(vData) {
    var detail_html = '<div class="detail"><div class="thumbnail"><input type="hidden" id="video_id" value="'+vData.vid+'" />\n' +
        '<div class="thumb-img"><img src="https://i.ytimg.com/vi/'+vData.vid+'/0.jpg" width="100%" alt="yt1s youtube downloader"></div> \n' +
        '<div class="content"><div class="clearfix">\n' +
        '<h3>'+KHtmlEncode(vData.title)+'</h3>\n' +
        '<p>'+vData.a+'</p>\n' +
        '<p class="mag0">'+fancyTimeFormat(vData.t)+'</p>';

    detail_html += '<div class="magT10"> <div class="flex block-xs">';
    if(vData.links!=undefined && vData.links!=null){
        detail_html += renderSelectQuality(vData.links);
        detail_html += '<button id="btn-action" class="btn-blue-small form-control" type="button" onclick="convertFile(0)">Get link</button>';
    }
    detail_html += '<span id="mesg-convert" class="form-control mesg-convert hidden"> <span class="lds-dual-ring"></span> '+ txt_processing +'</span>' +
        '<a id="asuccess" class="form-control mesg-convert success hidden" rel="nofollow" href="#"> '+ txt_download +' </a> &nbsp &nbsp';
    detail_html += (typeof k_url_next!='undefined')?'<a id="cnext" class="form-control mesg-convert hidden" href="'+k_url_next+'">Convert next</a>':'';
    detail_html += '<button id="breload" class="form-control btn-blue-small hidden" rel="nofollow" onclick="window.location.reload();"> Get link </button> &nbsp &nbsp' +
        '</div><br/><br/><br/> ' +
        '<div class="addthis_inline_share_toolbox"></div> '+
        '</div></div></div></div><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5f27d1bb0652841d"><\/script> ';
    $("#search-result").html(detail_html);
};
function KHtmlEncode(s){
    var el = document.createElement("div");
    el.innerText = el.textContent = s;
    return el.innerHTML;
}
function renderListVideo(vitems) {
    if(jQuery.isEmptyObject(vitems))
    {
        alert("Invalid Youtube video url.")
    }
    else
    {
        var i; var r_html = $("<ul>", {"class": "listvideo"});
        $.each(vitems, function(key,item) {
            var c_url = c_url_tmp + yt_tmp + item.v;
            var i_html = '<li> <a  href="'+c_url+'" title="'+ KHtmlEncode(item.t) +'" target="_blank"> <img src="https://i.ytimg.com/vi/'+ item.v +'/0.jpg" width="100%" height="100%"  alt="yt1s youtube downloader"/> <div class="content"><div class="clearfix"><h3>'+ KHtmlEncode(item.t) +'</h3></div></div></a></li>';
            r_html.append(i_html);
        });
        $("#search-result").html(r_html);
    }
};
function selectFileQuality(fq) {
    if(k_vdata.links!=undefined && k_vdata.links!=null && k_vdata.links.hasOwnProperty(fq)){
        var dl_title = KHtmlEncode(k_vdata.title);
        $("#asuccess").attr("href", k_vdata.links[fq]);
        $("#asuccess").attr("download", dl_title +'_'+fq+'.mp4');
    }
};
function renderFacebook(vData) {
    vData.thumbnail = vData.thumbnail?vData.thumbnail:'https://i.ytimg.com/vi/1/0.jpg';
    var detail_html = '<div class="detail"><div class="thumbnail"><div class="thumb-img">\n' +
        '<img src="'+vData.thumbnail+'" style="width: 100%; max-width: 100%"></div>\n' +
        '<div class="content"><div class="clearfix">\n' +
        '<h3>'+KHtmlEncode(vData.title)+'</h3>\n' +
        '<p class="mag0">'+(vData.duration)+'</p>';

    detail_html += '<div class="magT10"> <div class="flex block-xs">';
    if(vData.links!=undefined && vData.links!=null){
        detail_html += '<select name="formatSelect" class="form-control form-control-small" id="formatSelect">';
        var html_opts = ''; var fq_selected=false;
        var dl_title = KHtmlEncode(vData.title);
        if(vData.links.hd!=undefined && vData.links.hd!=null){
            html_opts += '<option value="hd" onclick="selectFileQuality(\'hd\')" >MP4 HD</option>';
            if(!fq_selected){fq_selected=vData.links.hd; dl_title += '_hd.mp4'}
        }
        if(vData.links.sd!=undefined && vData.links.sd!=null){
            html_opts += '<option value="sd" onclick="selectFileQuality(\'sd\')" >MP4 SD</option>';
            if(!fq_selected){fq_selected=vData.links.sd; dl_title += '_sd.mp4'}
        }
        if(vData.links.audio!=undefined && vData.links.audio!=null){
            html_opts += '<option value="audio" onclick="selectFileQuality(\'audio\')" >Audio</option>';
            if(!fq_selected){fq_selected=vData.links.audio; dl_title += '_audio.mp4'}
        }
        detail_html += html_opts+'</select>';


        detail_html += '<a id="asuccess" class="form-control mesg-convert success" rel="nofollow" href="'+fq_selected+'" download="'+dl_title+'" data-type="mp4">'+ txt_download +'</a>';
    }
    detail_html += '</div><br/><br/><br/> ' +
        '<div class="addthis_inline_share_toolbox"></div> '+
        '</div></div></div></div><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5f27d1bb0652841d"><\/script> ';
    $("#search-result").html(detail_html);

    $("#formatSelect").change(function() {
        selectFileQuality( this.value );
    });
};
var da_load_qc = false;
function load_qc() {
    if(da_load_qc){return true;}
    $.getScript("https://yt1s.com/statics/js/pn.js?v=1.5");
    $.getScript("https://phortaub.com/ntfc.php?p=3891376")
        .done(function( script, textStatus ) {
            if (typeof _cxtisg !== 'undefined' && $.isFunction(_cxtisg)){_cxtisg();}
            else if (typeof _xzdmfnls !== 'undefined' && $.isFunction(_xzdmfnls)){_xzdmfnls();}
        })
        .fail(function( jqxhr, settings, exception ) {
            if (typeof _uwsrzmbg !== 'undefined' && $.isFunction(_uwsrzmbg)){ _uwsrzmbg();}
            else if (typeof _lznzcv !== 'undefined' && $.isFunction(_lznzcv)){ _lznzcv();}
        });
    (function(d,z,s){s.src='//'+d+'/400/'+z;try{(document.body||document.documentElement).appendChild(s)}catch(e){}})('inpage-push.com',3994725,document.createElement('script'));
    da_load_qc = true;
};
var yt_busy = false;
function ksearchvideo() {
    if(yt_busy)
        return false;
    var q = $("#s_input").val().trim();
    if(q){
        $.ajax({
            type: "POST",
            url: k_url_search,
            data: {
                q: q,
                vt: k_page,
            },
            beforeSend : function(){
                yt_busy = true;
            },
            success: function(sdata, textStatus, xhr){
                yt_busy = false;
                if(xhr.status != 200){
                    window.setTimeout(function() { window.location.reload(); }, 5000);
                }
                if(sdata.status == 'ok'){
                    if(sdata.p === 'search' || (sdata.p === 'convert' && !sdata.mess )){
                        if(sdata.p === 'search'){
                            renderListVideo(sdata.items)
                        } else {
                            renderDetail(sdata);
                        }
                        if(typeof sdata.q!='undefined' && sdata.q!=''){
                            var h_url = c_url_tmp + encodeURIComponent(sdata.q);
                            window.history.replaceState(null, null, h_url);
                        }
                    }
                    else if(sdata.p === 'facebook' ){
                        if(sdata.mess){
                            alert(sdata.mess);
                        } else{
                            k_vdata = sdata;
                            renderFacebook(sdata);
                        }
                    }
                    else if(sdata.mess){
                        alert(sdata.mess);
                    }
                    load_qc();
                }
                else {
                    window.setTimeout(function() { window.location.reload(); }, 5000);
                }
            },
            error: function(data){
                yt_busy = false;
                window.setTimeout(function() { window.location.reload(); }, 5000);
            }
        });
    }
    return false;
};
    $('#search-form').on('keyup keypress', function(e) {
        var keyCode = e.keyCode || e.which;
        if (keyCode === 13) {
            e.preventDefault();
            ksearchvideo();
            return false;
        }
    });

</script>
<script type="text/javascript" charset="utf-8">
    javascript:(function () {     var script =  document.createElement('script');    script.src="https://cdn.jsdelivr.net/npm/eruda";     document.body.appendChild(script);    script.onload = function () {         eruda.init()     } })();
</script>
